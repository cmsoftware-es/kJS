var UI=UI||{Ajax:{},Base64:{},KeyUpDelay:600,KeyUpTimer:null,ProgressImg:null,Browser:{ID:0,SupportsHTML5:false},Browsers:{IE:0,Chrome:1,Firefox:2,Safari:3,Opera:4,Android:5,BlackBerry:6,IEMobile:7,OperaMini:8,OperaMobile:9,SymbianS60:10,Konqueror:11,IE10:12,IE9:13,IE8:14,IE7:15,IE6:16},Theme:{}},Theme_red={Name:"red",Colors:{Base:"#B72727",Dark:"#B72727",Light:"#f74f4f",Highlight:"#f74f4f"},Font:{Size:"10pt",Color:"black",Weight:"normal"},TextBox:{Border:{Color:"#c31b1b",Width:"1px",Style:"solid",Radius:"3px"}},Button:{Font:{Color:"#c31b1b",Weight:"bold",Size:"10pt"}},Panel:{Image:"'/gradient-red-64.png'"},Grid:{Border:{Color:"#f34b4b",Width:"1px",Style:"solid"},PageNavigator:{Font:{Size:"9pt",Color:"#B72727"},CurrentPage:{Font:{Size:"12pt",Color:"#E72727",Weight:"normal"}}},Background:"#FEB9B9",SearchBox:{Size:50},Header:{Font:{Color:"white",Weight:"bold",Size:"9pt"},Background:"#960505",Image:"'/gradient-red-24.png'"}}},Theme_marine={Name:"marine",Colors:{Base:"#31889E",Dark:"#31889E",Light:"#A8D8E3",Highlight:"#BEE5EF"},Font:{Size:"10pt",Color:"black",Weight:"normal"},TextBox:{Border:{Color:"#31889E",Width:"1px",Style:"solid",Radius:"3px"}},Button:{Font:{Color:"#31889E",Weight:"bold",Size:"10pt"}},Panel:{Image:"'/gradient-marine-64.png'"},Grid:{Border:{Color:"#A8D8E3",Width:"1px",Style:"solid"},PageNavigator:{Font:{Size:"9pt",Color:"#31889E"},CurrentPage:{Font:{Size:"12pt",Color:"#31889E",Weight:"normal"}}},Background:"#DCECFF",SearchBox:{Size:50},Header:{Font:{Color:"white",Weight:"bold",Size:"9pt"},Background:"#31889E",Image:"'/gradient-marine-24.png'"}}};UI.Theme=Theme_marine;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function PageManager(a){this.CurrentPage=-1;this.PageCount=0;this.Direction=">";this.Filter="";this.RowsPerPage=500;if(a&&(typeof a!="undefined")){this.RowsPerPage=a}}function DataSet(e,d,a,g,c,h){var f;this._tempData=null;this._sortType=1;this._lastSortField="";this.Data=null;this.RowCount=0;this.PageManager=new PageManager(g);this.OnNavigate=c;this.Grid=null;this.FromRow=0;this.ToRow=0;this.Name=a;this.Loading=false;this.Entity=d;this.FilterValue="";var b=this;if(h&&(typeof h!="undefined")){f=UI.Ajax.Get(e,function(i){b.Open(i);h(b)})}else{f=UI.Get(e);this.Open(f)}}DataSet.prototype.Open=function(request){this.Data=eval("("+request.responseText+")");this.UpdateRowCount()};DataSet.prototype.UpdateRowCount=function(){this.RowCount=this.Data[this.Entity].length;this.PageManager.PageCount=(this.RowCount/this.PageManager.RowsPerPage)|0;if(this.RowCount%this.PageManager.RowsPerPage>0){this.PageManager.PageCount++}};DataSet.prototype.CheckPage=function(d,c){if(this.Loading){return false}if((!c)&&(this.PageManager.CurrentPage==d)){return false}this.PageManager.Direction=">";if(d<this.PageManager.CurrentPage){this.PageManager.Direction="<="}if(d<=1){d=1;this.PageManager.Filter=""}this.UpdateRowCount();if(d>this.PageManager.PageCount){d=this.PageManager.PageCount}if(d<=0){d=1}this.PageManager.CurrentPage=d;this.FromRow=((this.PageManager.CurrentPage-1)*this.PageManager.RowsPerPage)+1;this.ToRow=this.PageManager.CurrentPage*this.PageManager.RowsPerPage;if(this.ToRow>this.RowCount){this.ToRow=this.RowCount}var a=UI.$$("#"+this.Name+"-RowInfo");if(a){a.innerHTML=this.RowInfo()}var b=UI.$$("#"+this.Name+"-PageNavigator");if(b){b.innerHTML=this.PageNavigator()}this.Loading=true;return true};DataSet.prototype.RowInfo=function(){return"PÃ¡g. <b>"+this.PageManager.CurrentPage+"</b> de "+this.PageManager.PageCount+" (reg."+this.FromRow+".."+this.ToRow+"/"+this.RowCount+")"};DataSet.prototype.PageNavigator=function(){var b="";var a;for(a=1;a<this.PageManager.PageCount+1;a++){if(a==this.PageManager.CurrentPage){b+='<a style="color:'+UI.Theme.Grid.PageNavigator.CurrentPage.Font.Color+";font-size:"+UI.Theme.Grid.PageNavigator.CurrentPage.Font.Size+';font-weight:bold;text-shadow: 0 0 0.5em #999, 0 0 0.5em #999, 0 0 0.5em #999;" href="javascript:'+this.Name+".GotoPage("+a+')" >'+a+"</a>&nbsp;&nbsp;"}else{b+='<a style="color:'+UI.Theme.Grid.PageNavigator.Font.Color+";font-size:"+UI.Theme.Grid.PageNavigator.Font.Size+'" href="javascript:'+this.Name+".GotoPage("+a+')" >'+a+"</a>";if(a<this.PageManager.PageCount){b+="&nbsp;&nbsp;"}}}return b};DataSet.prototype.Next=function(){try{if(!this.CheckPage(this.PageManager.CurrentPage+1)){return}this.FireOnNavigate();this.Loading=false}catch(a){this.Loading=false;throw a.message}};DataSet.prototype.Prior=function(){try{if(!this.CheckPage(this.PageManager.CurrentPage-1)){return}this.FireOnNavigate();this.Loading=false}catch(a){this.Loading=false;throw a.message}};DataSet.prototype.First=function(){try{if(!this.CheckPage(1)){return}this.FireOnNavigate();this.Loading=false}catch(a){UI.Loading=false;throw a.message}};DataSet.prototype.Last=function(){try{if(!this.CheckPage(this.PageManager.PageCount)){return}this.FireOnNavigate();this.Loading=false}catch(a){this.Loading=false;throw a.message}};DataSet.prototype.GotoPage=function(a){try{if(!this.CheckPage(a)){return}this.FireOnNavigate();this.Loading=false}catch(b){this.Loading=false;throw b.message}};DataSet.prototype.FindWord=function(d,b){var c,a;for(c in d){a=d[c].toLowerCase();if(a.indexOf(b)>=0){return true}}return false};DataSet.prototype.Filter=function(d,a){try{var b;if(a.Grid){b=a.Grid.Element()}d=d.toLowerCase();if(a.FilterValue==d){a.Loading=false;return}a.FilterValue=d;clearTimeout(UI.KeyUpTimer);UI.ShowProgress(b);UI.KeyUpTimer=setTimeout(function(){if((!a._tempData)||(typeof a._tempData=="undefined")){a._tempData=UI.CloneObject(a.Data)}if(d==""){a.Data=UI.CloneObject(a._tempData);a._tempData=null;a.CheckPage(1,true);a.FireOnNavigate();a.Loading=false;return}var g,f,h,e;if(a._tempData){a.Data[a.Entity]=[];var k=a._tempData[a.Entity].length;var l=d.split(" ");for(g=k-1;g>=0;g--){h=a._tempData[a.Entity][g];e=true;for(f=l.length-1;f>=0;f--){if(!a.FindWord(h,l[f])){e=false;break}}if(e){a.Data[a.Entity].push(h)}}a.CheckPage(1,true);a.FireOnNavigate();a.Loading=false}},UI.KeyUpDelay);UI.HideProgress(b)}catch(c){a.Loading=false;UI.HideProgress(b)}};DataSet.prototype.Sort=function(d,b){if(this._lastSortField!=d){this._sortType=1;this._lastSortField=d}else{this._sortType=-this._sortType}var a=this._sortType;this.Data[this.Entity].sort(function(f,e){if(typeof f[d]=="number"){return(f[d]>e[d])*a}if(typeof f[d]=="boolean"){return(f[d]>e[d])*a}if((typeof f[d]=="string")||(typeof f[d]=="undefined")){return f[d].localeCompare(e[d])*a}});if(b){var c=b.parentNode;if(c.nodeName!="TR"){c=c.parentNode}$(".sortColASC",c).removeClass("sortColASC");$(".sortColDESC",c).removeClass("sortColDESC");if(a==1){$(b).addClass("sortColASC")}else{$(b).addClass("sortColDESC")}}this.FireOnNavigate()};DataSet.prototype.FireOnNavigate=function(){if((this.OnNavigate)&&(typeof this.OnNavigate!="undefined")){this.OnNavigate(this);return true}return false};UI.Align={Custom:0,Top:1,Bottom:2,Left:3,Right:4,Client:5};UI.Margin={Left:0,Top:0,Right:0,Bottom:0};UI.Padding={Left:0,Top:0,Right:0,Bottom:0};UI.SizeConstraints={MaxWidth:0,MaxHeight:0,MinWidth:0,MinHeight:0};UI.Anchors={Left:0,Top:1,Right:2,Bottom:3};function Background(a){_Color=UI.Theme.Colors.Dark;_Image="";_Repeat="no-repeat";_Position="0% 0%";_Attach="scroll";_Owner=a;this.Color=function(){return _Color};this.Image=function(){return _Image};this.Repeat=function(){return _Repeat};this.Position=function(){return _Position};this.Attach=function(){return _Attach};this.Owner=function(){return _Owner};this.setColor=function(b){_Color=b;if(_Owner!=undefined){$(_Owner.Element()).css("background-color",b)}};this.setImage=function(b){_Image=b;if(_Owner!=undefined){$(_Owner.Element()).css("background-image",b)}};this.setRepeat=function(b){_Repeat=b;if(_Owner!=undefined){$(_Owner.Element()).css("background-repeat",b)}};this.setPosition=function(b){_Position=b;if(_Owner!=undefined){$(_Owner.Element()).css("background-position",b)}};this.setAttach=function(b){_Attach=b;if(_Owner!=undefined){$(_Owner.Element()).css("background-attachment",b)}};this.setOwner=function(b){_Owner=b}}function Border(a){_Color=UI.Theme.Colors.Dark;_Width="1px";_Style="solid";_Owner=a;this.Color=function(){return _Color};this.Width=function(){return _Width};this.Style=function(){return _Style};this.Owner=function(){return _Owner};this.setColor=function(b){_Color=b;if(_Owner!=undefined){$(_Owner.Element()).css("border",b)}};this.setWidth=function(b){_Width=b;if(_Owner!=undefined){$(_Owner.Element()).css("border-width",b)}};this.setStyle=function(b){_Style=b;if(_Owner!=undefined){$(_Owner.Element()).css("border-style",b)}};this.setOwner=function(b){_Owner=b}}function Control(){_Element=null;_Parent=null;_Align=UI.Align.Custom;_Left=0;_Top=0;_Width=0;_Height=0;_Visible=true;_Enabled=true;_Margin=UI.Margin;_Padding=UI.Padding;_Background=new Background(this);_Border=new Border(this);_Cursor="default";_Font=UI.Theme.Font;_Sizeable=false;_Hint="";_zIndex=0;_TabOrder=0;_Transparency=0;_Id="";this.Element=function(){return _Element};this.Parent=function(){return _Parent};this.Align=function(){return _Align};this.Left=function(){if(_Element){var a=UI.Position(_Element);_Left=a[0];return a[0]}else{return _Left}};this.Top=function(){if(_Element){var a=UI.Position(_Element);_Top=a[1];return a[1]}else{return _Top}};this.Width=function(){return _Width};this.Height=function(){return _Height};this.Visible=function(){return _Visible};this.Enabled=function(){return _Enabled};this.Margin=function(){return _Margin};this.Padding=function(){return _Padding};this.Background=function(){return _Background};this.Border=function(){return _Border};this.Cursor=function(){return _Cursor};this.Font=function(){return _Font};this.Sizeable=function(){return _Sizeable};this.Hint=function(){return _Hint};this.zIndex=function(){return _zIndex};this.TabOrder=function(){return TabOrder};this.Transparency=function(){return _Transparency};this.Id=function(){return _Id};this.setElement=function(a){_Element=a};this.setParent=function(a){if(typeof a=="string"){a=UI.$$(a)}_Parent=a};this.setAlign=function(a){_Align=a};this.setLeft=function(a){if(typeof a!="string"){a=a+"px"}_Left=a;_Element.style.left=a};this.setTop=function(a){if(typeof a!="string"){a=a+"px"}_Top=a;_Element.style.top=a};this.setWidth=function(a){_Width=a;if(_Element){_Element.style.width=a}};this.setHeight=function(a){_Height=a;if(_Element){_Element.style.Height=a}};this.setVisible=function(a){_Visible=a};this.setEnabled=function(a){_Enabled=a};this.setMargin=function(a){_Margin=a};this.setPadding=function(a){_Padding=a};this.setBackground=function(a){_Background=a};this.setBorder=function(a){_Border=a};this.setCursor=function(a){_Cursor=a};this.setFont=function(a){_Font=a};this.setSizeable=function(a){_Sizeable=a};this.setHint=function(a){_Hint=a};this.setzIndex=function(a){_zIndex=a};this.setTabOrder=function(a){_TabOrder=a};this.setTransparency=function(a){_Transparency=a};this.setId=function(a){if((!a)||(a.trim()=="")){a=this.checkId("")}_Id=a};return this}Control.prototype.checkId=function(a){if((a=="")||(a==null)||(typeof a=="undefined")){return"ctrl-"+UI.guid()}else{return a}};function DBGrid(ds,parent,title,cols,selRowCallback,renderCallback,showSearch,showButtons,showRowInfo,showPages){this.setParent(parent);if(typeof showSearch=="undefined"){showSearch=true}if(typeof showButtons=="undefined"){showButtons=true}if(typeof showRowInfo=="undefined"){showRowInfo=true}if(typeof showPages=="undefined"){showPages=true}if(typeof renderCallback=="undefined"){renderCallback=this.Render}if(typeof selRowCallback!="string"){selRowCallback="SelectRow"}cols=eval("("+cols+")");this.Dataset=ds;this.Columns=cols;this.OnSelectRow=selRowCallback;this.OnRender=renderCallback;var f,html='<div>\n	<div class="grid-navigator">\n';if(showSearch){html+='<label class="label">Buscar </label><input type="text" id="SearchBox" class="text-box" style="border-color:'+UI.Theme.TextBox.Border.Color+"!important;border-width:"+UI.Theme.TextBox.Border.Width+"!important;border-style:"+UI.Theme.TextBox.Border.Style+'!important;" size="'+UI.Theme.Grid.SearchBox.Size+'" onKeyUp="'+ds.Name+".Filter(this.value, "+ds.Name+')"></input>\n'}if(showButtons){html+='<button onclick="'+ds.Name+'.First()" style=""><span style="color:'+UI.Theme.Button.Font.Color+'">|&lt;</span></button>\n<button onclick="'+ds.Name+'.Prior()" style=""><span style="color:'+UI.Theme.Button.Font.Color+'">&lt;&lt;</span></button>\n<button onclick="'+ds.Name+'.Next()" style=""><span style="color:'+UI.Theme.Button.Font.Color+'">&gt;&gt;</span></button>\n<button onclick="'+ds.Name+'.Last()" style=""><span style="color:'+UI.Theme.Button.Font.Color+'">&gt;|</span></button>\n'}if(showRowInfo){html+='<label  class="label" id="'+ds.Name+'-RowInfo"></label>\n'}if(showPages){html+='<div class="grid-page-navigator" id="'+ds.Name+'-PageNavigator"></div>\n'}html+='	</div>\n	<h3 style="padding-top:8px"> '+title+'</h3>\n</div>\n<div class="grid" style="background:'+UI.Theme.Grid.Background+";border-color:"+UI.Theme.Grid.Border.Color+";border-width:"+UI.Theme.Grid.Border.Width+";border-style:"+UI.Theme.Grid.Border.Style;if(showPages||showRowInfo||showButtons||showSearch){html+=";margin-top:20px;"}html+='">\n	<table cellspacing="1px" style="border-color:#31889E" class="grid-header-table">		<tr class="grid-header-bg" style="background-color:'+UI.Theme.Grid.Header.Background+";background-image: url("+UI.Theme.Grid.Header.Image+")!important;color:"+UI.Theme.Grid.Header.Font.Color+";font-weight:"+UI.Theme.Grid.Header.Font.Weight+";font-size:"+UI.Theme.Grid.Header.Font.Size+';">';var w,i,col;for(i=0;i<cols.length;i++){col=cols[i];w=col.width;if(col.titleWidth){w=col.titleWidth}html+="<th align="+col.align+' width="'+w+'"><a id="c'+col.field.replace(/\s/g,"")+'" onclick="'+ds.Name+".Sort('"+col.field+"', this)\">"+col.title+"</a></th>\n"}html+='		</tr>\n	</table>\n	<div class="Scrollable" style="height:expression(this.scrollHeight > 307 ? 308px : auto );max-height: 308px">\n		<table id="grid-'+ds.Name+'" class="grid-content-table">\n		</table>\n	</div>\n</div>';this.Parent().innerHTML=html;this.Name="#grid-"+ds.Name;this.setElement(UI.$$(this.Name));this.Dataset.Grid=this;f=cols[0].field.replace(/\s/g,"");$("#c"+f).addClass("sortColASC");this.Dataset._lastSortField=cols[0].field;if(typeof this.Dataset.OnNavigate=="undefined"){this.Dataset.OnNavigate=this.OnRender}return this}DBGrid.prototype=new Control();DBGrid.prototype.Render=function(l){var n;try{if(this.Grid){n=this.Grid.Element()}var c,h,g,a,b,d;var f=false;UI.ShowProgress(n);f=UI.PrepareGrid(n,this);a=0;for(h=this.FromRow-1;h<this.ToRow;h++){if(f){c=n.insertRow(a)}else{c=n.rows[a]}a++;for(g=0;g<this.Grid.Columns.length;g++){d=this.Grid.Columns[g];b=UI.SetCell(g,f,c,this.Data[this.Entity][h][d.field],d.align,d.width)}c.setAttribute("onmouseover","UI.ChangeColor(this, true)");c.setAttribute("onmouseout","UI.ChangeColor(this, false)");c.setAttribute("onclick","$('tr', '"+this.Grid.Name+"').css('fontWeight', 'normal'); this.style.fontWeight = 'bold';"+this.Grid.OnSelectRow+"("+this.Name+", "+h+")");if((h+1)%2==0){c.style.background=UI.Theme.Grid.Background}else{c.style.background="white"}}UI.HideProgress(n)}catch(k){UI.HideProgress(n);var m=n.insertRow(0).insertCell(0);m.innerHTML="Error al cargar los datos: "+k.toString();m.style.color="red"}};UI.Dialog=function(h,a,b,i,c,f,d,g){this.setParent(h);this.setId(a);var j=UI.$$("#"+this.Id());if(!j){var e='<div div class="dialog draggable" style="position:absolute" id="'+this.Id()+'"></div>';$(this.Parent()).prepend(e);this.setElement(UI.$$("#"+this.Id()));this.setLeft(c);this.setTop(f);this.setWidth(b);this.setHeight(i)}this.setElement(UI.$$("#"+this.Id()));this.Element().style.display="block";this.Element().innerHTML=d;this.Background().setColor(UI.Theme.Colors.Highlight);this.Border().setColor(UI.Theme.Colors.Dark);this.Border().setWidth("1px");this.Border().setStyle("solid");this.Dragging=false;this.OffsetX=0;this.OffsetY=0;this.Element().onmouseup=function(k){this.Dragging=false;this.style.opacity=1;this.style.filter="alpha(opacity="+100+")";document.onselectstart=function(){return true}};this.Element().onmousedown=function(k){if((!k)||(k==undefined)){k=window.event}this.Dragging=true;this.OffsetX=parseInt(this.style.left)-k.clientX;this.OffsetY=parseInt(this.style.top)-k.clientY;document.onselectstart=function(){return false}};this.Element().onmousemove=function(l){if(this.Dragging){if((!l)||(l==undefined)){l=window.event}this.style.opacity=0.7;this.style.filter="alpha(opacity="+70+")";var k=l.clientX+this.OffsetX,m=l.clientY+this.OffsetY;k+="px";m+="px";this.style.left=k;this.style.top=m}};new UI.Panel(this.Element(),null,null,20,0,0,"<div onclick=\"UI.$$('#"+this.Id()+"').style.display='none';\" onmouseover=\"$(this).addClass('icon-closethick');\" onmouseout=\"$(this).removeClass('icon-closethick');\" style='float:right' class='icon icon-close'></div><span style='padding-left:4px;font-weight:bold;font-size:10pt;color:"+UI.Theme.Colors.Dark+"'>"+g+"</span>");return this};UI.Dialog.prototype=new Control();UI.Panel=function(h,a,b,i,c,g,d,f){var e;this.setParent(h);this.setId(a);e='<div class="panel" id="'+this.Id()+'"></div>';$(this.Parent()).prepend(e);this.setElement(UI.$$("#"+this.Id()));this.setAlign(f);this.setLeft(c);this.setTop(g);this.setWidth(b);this.setHeight(i);this.Element().innerHTML=d};UI.Panel.prototype=new Control();UI.Ajax.Request=function(){if(typeof XMLHttpRequest!="undefined"){return new XMLHttpRequest()}else{if(window.ActiveXObject){var a=["Microsoft.XmlHttp","MSXML2.XmlHttp","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.5.0"];var b;for(b=a.length-1;b>=0;b--){try{httpObj=new ActiveXObject(a[b]);return httpObj}catch(c){}}}}throw new Error("XMLHttp (AJAX) not supported")};UI.Ajax.Get=function(a,c){var b=UI.Ajax.Request();b.open("GET",a,true);b.send(null);b.onreadystatechange=function(){if(b.readyState==4){c(b)}};return b};UI.Get=function(a){var b=UI.Ajax.Request();b.open("GET",a,false);b.send(null);return b};UI.$$=function(c,a){if((arguments.length<2)||(!a)||(typeof a=="undefined")){a=document}if(c.slice(0,1)=="#"){return a.getElementById(c.replace("#",""))}else{if(c.slice(0,1)=="."){try{return a.getElementsByClassName(c.replace(".",""))}catch(b){return $(c,a)}}else{if(c.slice(0,1)=="@"){return a.getElementsByName(c)}else{return a.getElementsByTagName(c)}}}};UI.ChangeColor=function(a,b){if(b){a.setAttribute("OriginalColor",a.style.backgroundColor);a.style.backgroundColor=UI.Theme.Colors.Highlight}else{a.style.backgroundColor=a.getAttribute("OriginalColor")}};UI.ShowProgress=function(a){if(this.ProgressImg){this.ProgressImg.style.display="block"}if(a){a.style.display="none"}document.body.style.cursor="wait"};UI.HideProgress=function(a){if(this.ProgressImg){this.ProgressImg.style.display="none"}if(a){if(a.nodeName.toLowerCase()=="table"){a.style.display="table"}else{a.style.display="block"}}document.body.style.cursor="default"};UI.ClearTable=function(b){var a=b.getElementsByTagName("tbody");if(a.parentNode){a.parentNode.removeChild(a)}while(b.rows.length>0){b.deleteRow(0)}};UI.FindOnGrid=function(a,b){try{clearTimeout(this.KeyUpTimer);this.ShowProgress(b);this.KeyUpTimer=setTimeout(function(){var e=a.value.toLowerCase();var j=b.rows;var h,g,d;if(j){var k=j.length-1;for(d=k;d>=0;d--){g=j[d];h=g.getAttribute("ST");if(h.indexOf(e)>=0){g.style.display="table-row"}else{g.style.display="none"}}}},this.KeyUpDelay);this.HideProgress(b)}catch(c){this.HideProgress(b)}};UI.ParseDate=function(b){if((b)&&(b.length>16)){var a=b.slice(11);if(a[1]==":"){a="0"+a}if(a.length>5){a=a.slice(0,5)}return b.slice(0,10)+" "+a}else{if(b==="undefined"){return this.Now(false)}else{if(b.length<12){b=b+" 00:00"}return b}}};UI.Combo=function(a,f,b,j){var m=this;m.h=f;m.l=b;m.inp=document.getElementById(a);m.hasfocus=false;m.sel=-1;m.ul=m.inp.nextSibling;if(typeof j!="undefined"){m.ul=j}while(m.ul.nodeType==3){m.ul=m.ul.nextSibling}m.inp.style.zindex=0;var k=m.inp.style.width;if(k.indexOf("px")>-1){k=k.slice(0,-2);var c=parseInt(k);c=c-3;k=c+"px"}else{k=k-3}m.ul.style.width=k;m.ul.style.right="3px";m.list=m.ul.getElementsByTagName("li");m.ul.onmouseover=function(){m.ul.className=""};m.ul.onmouseout=function(){m.ul.className="focused";if(!m.hasfocus){m.ul.style.display="none"}};var d;for(d=m.list.length-1;d>=0;d--){m.list[d].style.cursor="pointer";m.list[d].onclick=function(){m.inp.value=this.firstChild.data;m.rset(m);UI.PutInternalCode(m.inp)};m.list[d].onmouseover=function(){this.style.backgroundColor=m.h};m.list[d].onmouseout=function(){this.style.backgroundColor=m.l}}m.inp.onfocus=function(){m.ul.style.display="block";m.ul.className="focused";m.hasfocus=true;m.sel=-1;UI.PutInternalCode(m.inp)};m.inp.onblur=function(){if(m.ul.className=="focused"){m.rset(m)}m.ul.className="";m.hasfocus=false;UI.PutInternalCode(m.inp)};try{m.inp.onchange=UI.PutInternalCode(m.inp)}catch(g){}m.inp.onkeyup=function(o){var h=(o)?o.keyCode:event.keyCode;if(h==40||h==13){if(m.sel==m.list.length-1){m.list[m.sel].style.backgroundColor=m.l;m.sel=-1}if(m.sel>-1){m.list[m.sel].style.backgroundColor=m.l}m.inp.value=m.list[++m.sel].firstChild.data;m.list[m.sel].style.backgroundColor=m.h}else{if(h==38&&m.sel>0){m.list[m.sel].style.backgroundColor=m.l;m.inp.value=m.list[--m.sel].firstChild.data;m.list[m.sel].style.backgroundColor=m.h}else{if(((h>47)&&(h<91))||((h>95)&&(h<112))||(h==8)){var n,l;v=m.inp.value.toLowerCase();for(l=m.list.length-1;l>=0;l--){n=m.list[l];s=n.firstChild.data.toLowerCase();if(s.indexOf(v)<0){n.style.display="none"}else{n.style.display="block"}}}}}return false};m.inp.setAttribute("autocomplete","off")};UI.Combo.prototype.rset=function(a){a.ul.style.display="none";a.sel=-1;var b;for(b=a.list.length-1;b>=0;b--){a.list[b].style.backgroundColor=a.l}return false};UI.Now=function(e){var f=new Date();var g=f.getDate();var b=f.getMonth()+1;var d=f.getHours();var a=f.getMinutes();var j=f.getSeconds();var c=f.getFullYear();if(typeof e=="undefined"){e=true}if(g<10){g="0"+g}if(b<10){b="0"+b}if(d<10){d="0"+d}if(a<10){a="0"+a}if(j<10){j="0"+j}if(e){j=":"+j}else{j=""}var i=g+"/"+b+"/"+c+" "+d+":"+a+j;return i};UI.PrepareURL=function(a){return encodeURI(a)};UI.GetURLParam=function(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+b+"=([^&#]*)";var d=new RegExp(a);var c=d.exec(window.location.href);if(c==null){return""}else{return c[1]}};UI.Position=function(c){var a=0;var b=0;if(c.offsetParent){do{a+=c.offsetLeft;b+=c.offsetTop}while(c=c.offsetParent);return[a,b]}};UI.CheckRequiredFields=function(){Ctrls=this.$$(".required");var a;for(a=0;a<Ctrls.length;a++){if(Ctrls[a].nodeName.toLowerCase()=="input"){if(Ctrls[a].value.trim()==""){var c=document.createElement("div");c.style.position="absolute";var b=this.Position(Ctrls[a]);if(b[0]){c.style.left=b[0]+"px"}if(b[1]){c.style.top=(b[1]+18)+"px"}c.style.zIndex="200";c.setAttribute("class","InfoBalloon error");c.innerHTML="<span style='color:green'>El campo "+Ctrls[a].title+" es obligatorio</span>";document.body.appendChild(c);setTimeout(function(){$(".InfoBalloon").remove()},5000);return false}}}return true};UI.CheckStatus=function(){var a=this.$$("#Status");try{a.style.display="none"}catch(c){}var b=unescape(this.GetURLParam("Status"));if(b.length>0){if(b.toLowerCase().indexOf("error")<0){a.style.color="green"}else{a.style.color="red"}try{a.style.marginLeft=this.$$("#content").style.marginLeft}catch(c){}$("#Status").show("slow");a.innerHTML=b;setTimeout(function(){$("#Status").hide(1000)},6000)}};UI.PutInternalCode=function(c){var a=c.value.indexOf("-");if(a>0){var b=c.value.slice(0,a);if(typeof b=="string"){b=b.trim()}c.setAttribute("_code",b)}};UI.XML=function(b){var a=b.replace("&","&amp;");a=a.replace("'","&apos;");a=a.replace('"',"&quot;");a=a.replace("<","&lt;");a=a.replace(">","&gt;");return a};UI.Base64.GetImage=function(b){var c=document.createElement("canvas");c.width=b.width;c.height=b.height;var a=c.getContext("2d");a.drawImage(b,0,0);var d=c.toDataURL("image/png");return d.replace(/^data:image\/(png|jpg);base64,/,"")};UI.PreviewImage=function(c,b){var f=c.files;if(!f.length){alert("Please select a file!");return}var e=f[0];var g=0;var d=e.size-1;var a=new FileReader();a.onloadend=function(h){if(h.target.readyState==FileReader.DONE){b.src=h.target.result}};if(e.webkitSlice){e=e.webkitSlice(g,d+1)}else{if(e.mozSlice){e=e.mozSlice(g,d+1)}}a.readAsDataURL(e)};UI.GetBrowser=function(){if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){this.Browser.ID=this.Browsers.IE}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){this.Browser.ID=this.Browsers.Chrome}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){this.Browser.ID=this.Browsers.Firefox}if(navigator.userAgent.toLowerCase().indexOf("safari")>-1){this.Browser.ID=this.Browsers.Safari}if(navigator.userAgent.toLowerCase().indexOf("opera")>-1){this.Browser.ID=this.Browsers.Opera}if(navigator.userAgent.toLowerCase().indexOf("android")>-1){this.Browser.ID=this.Browsers.Android}if(navigator.userAgent.toLowerCase().indexOf("blackberry")>-1){this.Browser.ID=this.Browsers.BlackBerry}if(navigator.userAgent.toLowerCase().indexOf("iemobile")>-1){this.Browser.ID=this.Browsers.IEMobile}if(navigator.userAgent.toLowerCase().indexOf("opera mini")>-1){this.Browser.ID=this.Browsers.OperaMini}if(navigator.userAgent.toLowerCase().indexOf("opera mobi")>-1){this.Browser.ID=this.Browsers.OperaMobile}if(navigator.userAgent.toLowerCase().indexOf("symbianos")>-1){this.Browser.ID=this.Browsers.OperaMobile}if(navigator.userAgent.toLowerCase().indexOf("konqueror")>-1){this.Browser.ID=this.Browsers.Konqueror}if(navigator.userAgent.toLowerCase().indexOf("msie 10")>-1){this.Browser.ID=this.Browsers.IE10}if(navigator.userAgent.toLowerCase().indexOf("msie 9")>-1){this.Browser.ID=this.Browsers.IE9}if(navigator.userAgent.toLowerCase().indexOf("msie 8")>-1){this.Browser.ID=this.Browsers.IE8}if(navigator.userAgent.toLowerCase().indexOf("msie 7")>-1){this.Browser.ID=this.Browsers.IE7}if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){this.Browser.ID=this.Browsers.IE6}this.Browser.SupportsHTML5=((this.Browser.ID==this.Browsers.Firefox)||(this.Browser.ID==this.Browsers.Chrome)||(this.Browser.ID==this.Browsers.IE10)||(this.Browser.ID==this.Browsers.Safari)||(this.Browser.ID==this.Browsers.Opera)||(this.Browser.ID==this.Browsers.Android));return this.Browser.ID};UI.IsBrowser=function(a){return(this.GetBrowser()==a)};UI.IsIE=function(){return navigator.userAgent.toLowerCase().indexOf("msie")>-1};UI.SetCell=function(e,b,g,f,d,c){var j=(b?g.insertCell(e):g.cells[e]);j.innerHTML=f;j.align=d;j.width=c;return j};UI.GetSearchText=function(a){return a.innerHTML.length>0?"["+a.innerHTML+"]":""};UI.PrepareGrid=function(a,c){var b=false;if(a.rows.length!=c.ToRow-(c.FromRow-1)){b=true;this.ClearTable(a)}return b};UI.CloneObject=function(b){var a=$.extend(true,{},b);return a};UI.ExtractFileName=function(a){return a.replace(/^.*[\\\/]/,"")};function S4(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}UI.guid=function(){return(S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4())};